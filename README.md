# [Are You AI Demo](https://areyouaidemo.com/)

![The front page of the Are You AI? Demo Application](https://github.com/user-attachments/assets/d64211c7-4ced-484a-ad19-7ad9a2af9c5c)

All code and information provided in this repository is made available on an "as-is" basis with the express understanding that Cloudflare has no obligation to monitor, control, maintain or otherwise update the materials. This demo is intended for demonstration purposes only and should not be used for production workloads. Your use of the demo is at your own discretion and risk. Cloudflare makes no claims or promises about the quality, accuracy, or reliability of the demo, its safety or security, or content generated by the demo (if any). Cloudflare is not liable to you for any loss or damage that might arise from your use of the demo.

## How To Deploy The App Yourself

ðŸš§ Under Construction ðŸš§

The below steps are out of date.

This application consists of two main pieces:

1. A [Next.js](https://nextjs.org/) frontend deployed on Cloudflare Workers
2. A [Hono](https://hono.dev/) backend deployed on Cloudflare Workers

Let's look at how to deploy and setup this application in your own Cloudflare environment.

### Pre-requisites

- A Cloudflare Account
- Cloudflare Wrangler Installed - [Install/Update Wrangler](https://developers.cloudflare.com/workers/wrangler/install-and-update/)
  
### Deploy the Hono backend API

[![Deploy to Cloudflare](https://deploy.workers.cloudflare.com/button)](https://deploy.workers.cloudflare.com/?url=https://github.com/thomas-desmond/are-you-ai-demo/tree/main/api)

1. Use the Deploy to Cloudflare button to deploy the `/api` directory to your Cloudflare account.
2. On the page for choosing names of your application & KV, D1, & Vectorize namespaces, you can leave the defaults or name them something more meaningful.
    * Make sure the names are valid they cannot contain underscores `_`
3. This will deploy the Hono backend API, save the URL of your deployed API.

### Additional backend setup

1. [Create an AI Gateway](https://developers.cloudflare.com/ai-gateway/get-started/#create-gateway) named `are-you-ai-demo` in your Cloudflare account
2. Create the tables in your D1 database.
    * If you have not already clone this repository to your machine
    * In the root of the repository run this command `npx wrangler d1 execute <your-db-name> --remote --file=./api/db-schema.sql`. Be sure to replace `<your-db-name>` with whatever you named your D1 database.
    * This will create the `Sessions` table in your D1 database to store all sessions of Are You AI?
3. The KVs and Vectorize database need to be populated with images and image vectors. The below endpoints will perform the setup for you. It will look like nothing is happening but give them a few minutes. One these one at a time.
    * Start by setting up your KVs with image data. Using your browser go to `<your-api-url>/setupImages`. It will appear like nothing is happening but after a few minutes you'll see `Image Setup Complete` in your browser
    * Next setup vectorize by going to `<your-api-url>/setupVectorize` in your browser. Again, it will look like nothing is happening. Wait a few minutes and you'll see `Vectorize Setup Complete`


The backend is all setup!

### Deploy the Next.js frontend

[![Deploy to Cloudflare](https://deploy.workers.cloudflare.com/button)](https://deploy.workers.cloudflare.com/?url=https://github.com/thomas-desmond/are-you-ai-demo/tree/main/frontend)


1. Use Deploy To Cloudflare with defaults
2. Once deployed to to the settings for this worker and add an environment variable named `API_ENDPOINT` set to the URL of the deployed API.
